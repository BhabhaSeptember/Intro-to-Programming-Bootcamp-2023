<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>InterMed JS</title>



    <!-- 
//STYLESHEET

/*  PRACTICE EXERCISE 12.7  */
.ready {
background-color: #ddd;
color: red;
text-decoration: line-through;
}
    




//CHAPTER PROJECTS
//FORM VALIDATOR

  .hide {
display: none;
}
.error {
color: red;
font-size: 0.8em;
font-family: sans-serif;
font-style: italic;
}
input {
border-color: #ddd;
width: 400px;
display: block;
font-size: 1.5em;
}




    -->

    <style>
  


    </style>


</head>


<body>
  <h1>3. Ch12 (InterMed JS)</h1>
  <hr />
  <br> <br>


<!-- 
 
-->
 








  <script>  

 /*  PRACTICE EXERCISE 12.6 */

console.log("Current cookies = " + document.cookie);

function cCookie(cName, cValue, numOfDays) {
  if (numOfDays) {  //i.e. if the days are valid the following block of code will be run
const d = new Date();  //current date
d.setTime(d.getTime()) 
  }
}
// console.log(rCookie("test1"));
// console.log(rCookie("test"));

  </script> 


  <!-- //CHAPTER PROJECTS
  //1. EMAIL EXTRACTOR
  //HTML
   <textarea name="txtarea" rows=2 cols=50></textarea> <button>Get
        Emails</button>
        <textarea name="txtarea2" rows=2 cols=50></textarea>
  
  
  
        //JS
  const firstArea = document.querySelector(
  "textarea[name='txtarea']");
  const secArea = document.querySelector(
  "textarea[name='txtarea2']");
  document.querySelector("button").addEventListener("click", lookUp);
  function lookUp() {
  const rawTxt = firstArea.value;
  const eData = rawTxt.match(
  /([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9._-]+)/gi);
  const holder = [];
  for (let x = 0; x < eData.length; x++) {
  if (holder.indexOf(eData[x]) == -1) {
  holder.push(eData[x]);
  }
  }
  secArea.value = holder.join(',');
  }
  
  
  
  
  
  //2. FORM VALIDATOR (SEE 'head' above for 'stylesheet')
  //HTML
  <form name="myform"> Email :
        <input type="text" name="email"> <span class="error hide"></span>
        <br> Password :
  <input type="password" name="password"> <span class="error
  hide"></span>
  <br> User Name :
  <input type="text" name="userName"> <span class="error hide"></span>
  <br>
  <input type="submit" value="Sign Up"> </form>
  
  
  //JS
  const myForm = document.querySelector("form");
  const inputs = document.querySelectorAll("input");
  const errors = document.querySelectorAll(".error");
  const required = ["email", "userName"];
  myForm.addEventListener("submit", validation);
  function validation(e) {
  let data = {};
  e.preventDefault();
  errors.forEach(function (item) {
  item.classList.add("hide");
  });
  let error = false;
  inputs.forEach(function (el) {
  let tempName = el.getAttribute("name");
  if (tempName != null) {
  el.style.borderColor = "#ddd";
  if (el.value.length == 0 &&
  required.includes(tempName)) {
  addError(el, "Required Field", tempName);
  error = true;
  }
  if (tempName == "email") {
  let exp = /([A-Za-z0-9._-]+@[A-Za-z0-9._-]+\.[A-Za-z0-9]+)\w+/;
  let result = exp.test(el.value);
  if (!result) {
  addError(el, "Invalid Email", tempName);
  error = true;
  }
  }
  if (tempName == "password") {
  let exp = /[A-Za-z0-9]+$/;
  let result = exp.test(el.value);
  
  if (!result) {
  addError(el, "Only numbers and Letters",
  tempName);
  error = true;
  }
  if (!(el.value.length > 3 &&
  el.value.length < 9)) {
  addError(el, "Needs to be between 3-8 " +
  "characters", tempName);
  error = true;
  }
  }
  data[tempName] = el.value;
  }
  });
  if (!error) {
  myForm.submit();
  }
  }
  function addError(el, mes, fieldName) {
  let temp = el.nextElementSibling;
  temp.classList.remove("hide");
  temp.textContent = fieldName.toUpperCase() + " " + mes;
  el.style.borderColor = "red";
  el.focus();
  }
  
  
  
  
  //3.SIMPLE MATH QUIZ
  //HTML
  <span class="val1"></span> <span>+</span> <span class="val2"></span> = <span>
        <input type="text" name="answer"></span><button>Check</button>
        <div class="output"></div>
  
  
  
        //JS
  const app = function () {
  const game = {};
  const val1 = document.querySelector(".val1");
  const val2 = document.querySelector(".val2");
  const output = document.querySelector(".output");
  const answer = document.querySelector("input");
  function init() {
  document.querySelector("button").addEventListener(
  "click", checker);
  loadQuestion();
  }
  function ranValue(min, max) {
  return Math.floor(Math.random() * (max - min + 1) +
  min);
  }
  function loadQuestion() {
  game.val1 = ranValue(1, 100);
  game.val2 = ranValue(1, 100);
  game.answer = game.val1 + game.val2;
  val1.textContent = game.val1;
  val2.textContent = game.val2;
  }
  function checker() {
  let bg = answer.value == game.answer ? "green" : "red";
  output.innerHTML += `<div style="color:${bg}">${game.val1} + ${game.val2} = ${game.answer} (${answer.value})</div>`;
  answer.value = "";
  loadQuestion();
  }
  return {
  init: init
  };
  }();
  document.addEventListener('DOMContentLoaded', app.init);
  
   -->
  
  



  
   

 

    <!--  
//Ch CODE: 
//REGULAR EXPRESSIONS
//EXAMPLE 1: 
 let text = "I love JavaScript!";
console.log(text.match(/javascript/));
  console.log(text.match(/javascript/i));



  //SPECIFYING MULTIPLE OPTIONS FOR WORDS
//EXAMPLE 1:
 let text = "I love JavaScript!";
console.log(text.match(/javascript|nodejs|react/i)); //Logs 'JavaScript'


let text2 = "I love React and JavaScript!";
console.log(text2.match(/javascript|nodejs|react/i));  //Logs 'React'


let text3 = "I love React and JavaScript!";
console.log(text3.match(/javascript|nodejs|react/gi)); //Logs ' ["React", "JavaScript" ] '





//CHARACTER OPTIONS
let text = "d";
console.log(text.match(/[abc]/));  //Logs 'null'
console.log(text.match(/[abcd]/)); 
console.log(text.match(/[a-d]/));  //Considers range of characters

console.log("1. " + text.match(/[a-zA-Z]/)); //Considers upper & lower case
console.log("2. " + text.match(/[a-z]/i)); //Case insensitive but applies to whole regex pattern i.e. gives same result as above
console.log(text.match(/[a-zA-Z0-9]/));

let text2 = "äé!";
console.log(text2.match(/[a-zA-Z0-9]/)); //Logs 'null'


let text3 = "Just some text.";
console.log(text3.match(/./g)); //Logs each character separately (incl letters & punctuation) || 'dot' acts as wild card

let text4 = "Just some text.";
console.log(text4.match(/\./g));   //Logs the 'dot' puctuation mark (backslash)



let text5 = "I'm 29 years old.";
console.log(text5.match(/\d/g)); //Matches digits therefore Logs ' ["2", "9"] '


let text6 = "Character Wild Cards!";
console.log(text6.match(/\s/g));  //Matches all white space characters

let text7 = "In the end or at the beginning?";
console.log(text7.match(/\bin/gi));  //Matches text only at the beginning of a word therefore Logs 'In'

let nr = 357;
console.log(nr.match(/3/g));  //Numbers dealt with by creating a variable for the number|| Logs 'TypeError, nr.match is not a func'





//Groups

let text = "I love JavaScript!";
console.log(text.match(/(love|dislike)\s(javascript|spiders)/gi));  //Logs ' ["love JavaScript"] '

let text2 = "I love JavaScript!";
console.log(text.match(/[a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9][a-zA-Z0-9]/g));

let text3 = "You are doing great!";
console.log(text3.match(/n?g/gi));  //Looks for 'g' character that may or may not be preceded by the letter 'n'


let text4 = "123123123";
console.log(text4.match(/(123)+/));
console.log(text4.match(/(123)*a/));  //Matches any 'a' preceded by '123' ANY number of times (*) therefore Log 'null'

//NOTE : Syntax = {min, max}
let text5 = "abcabcabc";
console.log("5. " + text5.match(/(abc){1,2}/)); //Syntax {1, 2} = Looks for one and two repetitions 

let text6 = "JavaScript!";
console.log(text6.match(/(?<language>javascript)/i));





    //PRACTICAL REGEX
    //SEARCHING & REPLACING STRINGS
   let text = "That's not the case.";
console.log(text.search(/Case/i));   //Logs index value of starting character ('i' ignores case sensitivity)


//Example 1:Replaces first instance
let text2 = "Global Modifier";
console.log(text2.replace("Global", "Index")); //Syntax = ("Target", "Replacement")


//Example 2: Replaces all occurrences
let text3 = "Global Modifier is a Global Identifier";
console.log(text3.replace(/Global/g, "Index"));  //Finds all instances of 'Global'





/*   PRACTICE EXERCISE 12.1    */
//HTML 
   <div id="output"> JavaScript Professional </div>
  Search for:
  <input id="sText" type="text">
  <br> Replace with:
  <input id="rText" type="text">
  <br>
  <button>Replace</button>




    //JS
 const output = document.getElementById("output");
  const searchValue = document.getElementById("sText");
  const replaceValue = document.getElementById("rText");
  document.querySelector("button").addEventListener("click", lookUp);


function lookUp() {
    const searchResult = output.textContent;
    const replacement = replaceValue.value;
    const regex = new RegExp(searchValue.value, "gi");

    if (searchResult.match(regex)) {
        let newValue = search.replace(regex, replacement);
        output.textContent = newValue;
    }
}




//EMAIL VALIDATION
 //Regex Pattern = [name]@[domain].[extension]
//EXAMPLE 1: 
 let emailPattern = /([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9._-]+)/g;
let validEmail = "maaike_1234@email.com";
let invalidEmail = "maaike@mail@.com";
console.log(validEmail.match(emailPattern));
console.log(invalidEmail.match(emailPattern));




/*   PRACTICE EXERCISE 12.2    */
/HTML
    <div class="output"></div>
  <input class="emailValue" type="text" placeholder="Enter Email">
  <button class="button">Check</button>



    //JS
const output = document.querySelector(".output");
const emailValue = document.querySelector(".emailValue");
const button = document.querySelector(".button");

const emailExpression = /([A-Za-z0-9._-]+@[A-Za-z0-9._-]+\.[A-Za-z0-9]+)\w+/;

button.addEventListener("click", (e) => {
    const value = emailValue.value;
    const result = emailExpression.test(value);
    let response = "";    //populates div output content
    if (!result) {
        response = "Sorry, Invalid Email";
        output.style.color = "red";
    } else {
        response = "Approved : Valid Email";
        output.style.color = "green";
    }
    emailValue.value = "";
    output.textContent = response;
});
  

  



//FUNCTIONS & THE ARGUMENTS OBJECT
//EXAMPLE 1:
function test(a, b, c) {
console.log("first:" +  a + arguments[0]);
console.log("second:" + b + arguments[1]);
console.log("third:" + c + arguments[2]);
}
test("fun", "js", "secrets");



function test2(a, b, c) {     //parameters
a = "nice";
arguments[1] = "JavaScript";
console.log("first:", a, arguments[0]);
console.log("second:", b, arguments[1]);
console.log("third:", c, arguments[2]);
}
test2("fun", "js", "secrets");   //arguments
console.log("An argument: " + arguments[0]);





/*    PRACTICE EXERCISE 12.3    */
function showNames() {
    let lastOne= "";
    for (let i = 0; i < arguments.length; i++) {
        lastOne = arguments[i];
    }
    return lastOne;
}
console.log(showNames("Quentin", "Tarantino", "Christopher", "Nolan"))




//JS HOISTING
//Hoisting = A principle that moves all 'var' declarations to the top of the scope i.e. (to the top of file so read first before file processing)
//Note: Only declarations, not initializations
//Logs 'undefined' if used before initialization

//var varX;
// varX = 5;
// console.log( "x1 (var) : " + varX);

// let letX;
// letX = 5;
// console.log( "x1 (let): " + letX);



// varX2 = 5;
// console.log( "x2 (var) : " + varX2);
// var varX2;

// letX2 = 5;
// console.log( "x2 (let) : " + letX2);
// let letX2;    //Logs TypeError




//USING STRICT MODE
//syntax = "use strict";
//EXAMPLE 1:
 function welcomeMessage() {
greeting = "Hello, pleased to meet you. How can I help you? {^_^}";   //greeting hasn't been declared but JS creates a variable for us
console.log(greeting);
}
welcomeMessage();   


//NOTE: If strict mode is on, then above example would log error to remind you to create declare a variable for the greeting string



//DEBUGGING
//Finding errors
//Step 1 : Is to always check the console in browser
//Step 2 : Log every step of your code to the console 
//Possible common errors : 
//a) You are relying on a variable that hasnt been defined
//b) Type errors in mathematical computations


//BREAKPOINTS
//Go to 'Sources' panel in browser
//Click on line before code you wish to test
//Programme runs and stops at specified breakpoint (then you can inspect code line by line from that 'breakpoint' )
//Then you can continue running programme and it will stop at next breakpoint or come and stop at same breakpoint again



/*    PRACTICE EXERCISE 12.4 (REVISIT)  */
let val = 5;
      val += adder();
      val += adder();
      val += adder();
      console.log(val);

      function adder() {
        let counter = val;
        for (let i = 0; i < val; i++) {
          counter++;
        }
        return counter;
      }



      //ERROR HANDLING
//EXAMPLE 1:  (Note : Checks for exact errors)
function somethingVeryDangerous(x, y) {
const sum = x + y;
console.log(sum);
try {
  if (isNaN(somethingVeryDangerous)) {
    throw "Not a number";
  } else {
    console.log("Got a number");
  }
} catch (e) {
console.error(e);
} finally {
  console.log("Done" + somethingVeryDangerous);
}
}

somethingVeryDangerous(5, 4);



      try {
somethingVeryDangerous();
} catch (e) {
if (e instanceof TypeError) {
// deal with TypeError exceptions
} else if (e instanceof RangeError) {
// deal with RangeError exceptions
} else if (e instanceof EvalError) {
// deal with EvalError exceptions
} else {
//deal with all other exceptions
throw e; //rethrow
}
};





//EXAMPLE 2:
try {
trySomething();
} catch (e) {
console.log("Oh oh");
} finally {
console.log("Error or no error, I will be logged!");
}

//When you want to 'throw' error to function that called it to deal with the error
function somethingVeryDangerous() {
throw RangeError();
}






/*    PRACTICE EXERCISE 12.5    */
function test(value) {
  try {
    if (isNaN(value)) {
      throw "If throw error = Sorry this is not a number";
    } else {
      console.log("Else = Got it {^.^} , this IS a number!");
  }
  } catch(e) {
    console.error("Error type = (" + e + ")");
  } finally {
    console.log("Finally = Done : " + value);
  }
}
test("a");
test(100);





//USING COOKIES
//EXAMPLE 1:
document.cookie = "name = Bhabha ; favoriteColor = aquamarine";

let cookie = decodeURIComponent(document.cookie);
let cookieList = cookie.split(";");
for (let i = 0; i < cookieList.length; i++) {
let c = cookieList[i];
if (c.charAt(0) == " ") {
c = c.trim();
}
if (c.startsWith("name")) {
alert(c.substring(5, c.length));
}
}


//EXAMPLE 2:
//HTML
   <input onchange="setCookie(this)" />
<button onclick="sayHi('name')"> Cookies ! </button>
<p id="hi"></p>


//JS
function setCookie(e) {
document.cookie = "name=" + e.value + ";";
}

function sayHi(key) {
let name = getCookie(key);
document.getElementById("hi").innerHTML = "Hi " + name;
}

function getCookie(key) {
let cookie = decodeURIComponent(document.cookie);
let cookieList = cookie.split(";");
for (let i = 0; i < cookieList.length; i++) {
let c = cookieList[i];
if (c.charAt(0) === " ") {
c = c.trim();
}

if (c.startsWith(key)) {
console.log("hi" + c);
return c.substring(key.length + 1, c.length);   //Syntax = (starting index number , length)
}
}
}





/*   PRACTICE EXERCISE 12.6    */
console.log(document.cookie);
console.log(rCookie("test1"));
console.log(rCookie("test"));
cCookie("test1", "new Cookie", 30);
dCookie("test2");

function cCookie(cName, value, days) {
  if (days) {
    const d = new Date();
    d.setTime(d.getTime() + (days * 24 * 60 * 60 * 1000));
    let e = "; expires=" + d.toUTCString();
    document.cookie = cName + "=" + value + e + "; path=/";
  }
}

function rCookie(cName) {
let cookieValue = false;
let arr = document.cookie.split("; ");
arr.forEach(str => {
const cookie = str.split("=");
if (cookie[0] == cName) {
cookieValue = cookie[1];
}
});
return cookieValue;
}
function dCookie(cName) {
cCookie(cName, "", -1);
}





//LOCAL STORAGE
//EXAMPLE 1:
//HTML
<div id="stored"></div>


//JS
let message = "Hello storage!";
localStorage.setItem("example", message);
if (localStorage.getItem("example")) {
document.getElementById("stored").innerHTML =
localStorage.getItem("example");
}

window.localStorage.key(0);
window.localStorage.getItem(window.localStorage.key(0));
window.localStorage.removeItem("name");
window.localStorage.clear();




/*   PRACTICE EXERCISE 12.7 (SEE 'head' above for 'stylesheet')   */
//HTML
    <div class="main">
<input placeholder="New Item" value="test item" maxlength="30">
<button>Add</button>
</div>
<ul class="output">
</ul>



//JS
const userTask = document.querySelector(".main input");
const addButton = document.querySelector(".main button");
const output = document.querySelector(".output");
const tasks = JSON.parse(localStorage.getItem("taskList")) || [];
addButton.addEventListener("click", createListItem);
if (tasks.length > 0) {
  tasks.forEach((task) => {
    generateItem(task.value, task.checked);
  });
}

function saveTasks() {
  localStorage.setItem("taslList", JSON.stringify(tasks));
}

function buildTasks() {
  tasks.length = 0;
  const currentList = output.querySelectorAll("li");
  currentList.forEach((element) => {
    const tempTask = {
      val : element.textContent, 
      checked : fals
    };
    if (element.classList.contains("ready")) {
      tempTask.checked = true;
    }
    tasks.push(tempTask);
  });
  saveTasks();
}
function generateItem(val, complete) {
  const li = document.createElement("li");
  const temp = document.createTextModel(val);
  li.appendChild(temp);
  output.appendChild(li);
  userTask.value = "";

  if(complet) {
    li.classList.add("ready!");
  }
  li.addEventListener("click", (e) => {
    li.classList.toggle("ready");
    buildTasks();
  });
  return val;
}

function createListItem() {
  const val = userTask.value;

if (val.length > 0) {
  const myObj = {
    val : generateItem(val, false),
    checked : false

  };
  tasks.push(myObj);
  saveTasks();
}
}



//JSON
/EXAMPLE 1:
info = {
"name" : "Malika",
"age" : 50,
"profession" : "programmer",
"languages" : ["JavaScript", "C#", "Python"],
"address" : {
"street" : "Some street",
"number" : 123,
"zipcode" : "3850AA",
"city" : "Utrecht",
"country" : "The Netherlands"
}
}
console.log(info);


//EXAMPLE 2:
company = {
"companies": [
{
"name": "JavaScript Code Dojo",
"addresses": [
{
"street": "123 Main street",
"zipcode": 12345,
"city" : "Scott"
},
{
"street": "123 Side street",
"zipcode": 35401,
"city" : "Tuscaloosa"
}
]
},
{
"name": "Python Code Dojo",
"addresses": [
{
"street": "123 Party street",
"zipcode": 68863,
"city" : "Nebraska"
},
{
"street": "123 Monty street",
"zipcode": 33306,
"city" : "Florida"
}
]
}
]
}
console.log(company);



/*    PRACTICE EXERCISE 12.8    */
//JS
let myList = [{
  "name" : "JavaScript Object Notation (JSON)",
  "status" : true
},
{
  "name" : "JSON = Data format",
  "status" : false
}
];


reloader();
function reloader() {
  myList.forEach((element) => {
    console.log(`${element.name } = ${element.status}`);
  });
}





//PARSING JSON
//EXAMPLE 1:
let str = "{\"name\": \"Tracy\", \"age\": 27}";
let obj = JSON.parse(str);
console.log(obj.name, "is", obj.age);



//EXAMPLE 2:
let dog = {
"name": "Pippa",
"breed": "dachshund"
};
console.log(dog);



//EXAMPLE 3:

let strdog = JSON.stringify(dog);
console.log(typeof strdog);
console.log(strdog);




/*   PRACTICE EXERCISE 12.9  */
let myList = [{
"name": "Learn JavaScript",
"status": true
},
{
"name": "Try JSON",
"status": false
}
];

const newStr = JSON.stringify(myList);
const newObj = JSON.parse(newStr);
newObj.forEach((el)=>{
console.log(el);
});










//SELF-CHECK QUIZ
//1. 
    -->

    
    

    
  </body>
</html>
